{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{188:function(t,e,s){\"use strict\";var i=s(0),a=s.n(i),n=s(416);let r,h=90,l=89;function o(t){let e,s;if(void 0!==t.selectionStart)e=t.selectionStart,s=t.selectionEnd;else try{t.focus();let i=t.createTextRange(),a=i.duplicate();i.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint(\"EndToStart\",i),s=(e=a.text.length)+i.text.length}catch(t){}return{start:e,end:s}}const u=\"\\\\\",p=/^\\d$/,c=/^[A-Za-z]$/,d=/^[\\dA-Za-z]$/,f=\"_\",_={\"*\":{validate:function(t){return d.test(t)}},1:{validate:function(t){return p.test(t)}},a:{validate:function(t){return c.test(t)}},A:{validate:function(t){return c.test(t)},transform:function(t){return t.toUpperCase()}},\"#\":{validate:function(t){return d.test(t)},transform:function(t){return t.toUpperCase()}}};class m{constructor(t,e,s,i=!1){this.pattern=[],this.length=0,this.firstEditableIndex=null,this.lastEditableIndex=null,this._editableIndices={},this.placeholderChar=s||f,this.formatCharacters=e||_,this.source=t,this.isRevealingMask=i,this._parse()}_parse(){for(var t=this.source.split(\"\"),e=0,s=[],i=0,a=t.length;i<a;i++){var n=t[i];if(n===u){if(i===a-1)throw new Error(\"InputMask: pattern ends with a raw \"+u);n=t[++i]}else n in this.formatCharacters&&(null===this.firstEditableIndex&&(this.firstEditableIndex=e),this.lastEditableIndex=e,this._editableIndices[e]=!0);s.push(n),e++}if(null===this.firstEditableIndex)throw new Error('InputMask: pattern \"'+this.source+'\" does not contain any editable characters.');this.pattern=s,this.length=s.length}formatValue(t){for(var e=new Array(this.length),s=0,i=0,a=this.length;i<a;i++)if(this.isEditableIndex(i)){if(this.isRevealingMask&&t.length<=s&&!this.isValidAtIndex(t[s],i))break;e[i]=t.length>s&&this.isValidAtIndex(t[s],i)?this.transform(t[s],i):this.placeholderChar,s++}else e[i]=this.pattern[i],t.length>s&&t[s]===this.pattern[i]&&s++;return e}isEditableIndex(t){return!!this._editableIndices[t]}isValidAtIndex(t,e){return this.formatCharacters[this.pattern[e]].validate(t)}transform(t,e){var s=this.formatCharacters[this.pattern[e]];return\"function\"==typeof s.transform?s.transform(t):t}}class v{constructor(t){this.emptyValue=\"\",this._history=[],this._historyIndex=null,this._lastOp=null,this._lastSelection=null;const e={isRevealingMask:!1,placeholderChar:f,selection:{start:0,end:0},value:\"\",...t};if(!e.pattern)throw new Error(\"InputMask: you must provide a pattern.\");if(\"string\"!=typeof e.placeholderChar||e.placeholderChar.length>1)throw new Error(\"InputMask: placeholderChar should be a single character or an empty string.\");this.placeholderChar=e.placeholderChar,this.formatCharacters=function(t){var e={..._};if(t)for(var s=Object.keys(t),i=0,a=s.length;i<a;i++){var n=s[i];null==t[n]?delete e[n]:e[n]=t[n]}return e}(e.formatCharacters),this.setPattern(e.pattern,{value:e.value,selection:e.selection,isRevealingMask:e.isRevealingMask})}setPattern(t,e){const s={selection:{start:0,end:0},value:\"\",...e};this.pattern=new m(t,this.formatCharacters,this.placeholderChar,s.isRevealingMask),this.setValue(s.value),this.emptyValue=this.pattern.formatValue([]).join(\"\"),this.selection=s.selection,this._resetHistory()}setValue(t){null==t&&(t=\"\"),this.value=this.pattern.formatValue(t.split(\"\"))}_resetHistory(){this._history=[],this._historyIndex=null,this._lastOp=null,this._lastSelection={...this.selection}}getValue(){return this.pattern.isRevealingMask&&(this.value=this.pattern.formatValue(this.getRawValue().split(\"\"))),this.value.join(\"\")}getRawValue(){for(var t=[],e=0;e<this.value.length;e++)!0===this.pattern._editableIndices[e]&&t.push(this.value[e]);return t.join(\"\")}input(t){if(this.selection.start===this.selection.end&&this.selection.start===this.pattern.length)return!1;const e=g(this.selection),s=this.getValue();let i=this.selection.start;if(i<this.pattern.firstEditableIndex&&(i=this.pattern.firstEditableIndex),this.pattern.isEditableIndex(i)){if(!this.pattern.isValidAtIndex(t,i))return!1;this.value[i]=this.pattern.transform(t,i)}else console.log(\"not editable\");let a=this.selection.end-1;for(;a>i;)this.pattern.isEditableIndex(a)&&(this.value[a]=this.placeholderChar),a--;for(this.selection.start=this.selection.end=i+1;this.pattern.length>this.selection.start&&!this.pattern.isEditableIndex(this.selection.start);)this.selection.start++,this.selection.end++;return null!=this._historyIndex&&(this._history.splice(this._historyIndex,this._history.length-this._historyIndex),this._historyIndex=null),(\"input\"!==this._lastOp||e.start!==e.end||null!==this._lastSelection&&e.start!==this._lastSelection.start)&&this._history.push({value:s,selection:e,lastOp:this._lastOp}),this._lastOp=\"input\",this._lastSelection=g(this.selection),!0}backspace(){if(0===this.selection.start&&0===this.selection.end)return!1;var t={...this.selection},e=this.getValue();if(this.selection.start===this.selection.end)this.pattern.isEditableIndex(this.selection.start-1)&&(this.pattern.isRevealingMask?this.value.splice(this.selection.start-1):this.value[this.selection.start-1]=this.placeholderChar),this.selection.start--,this.selection.end--;else{for(var s=this.selection.end-1;s>=this.selection.start;)this.pattern.isEditableIndex(s)&&(this.value[s]=this.placeholderChar),s--;this.selection.end=this.selection.start}return null!=this._historyIndex&&this._history.splice(this._historyIndex,this._history.length-this._historyIndex),(\"backspace\"!==this._lastOp||t.start!==t.end||null!==this._lastSelection&&t.start!==this._lastSelection.start)&&this._history.push({value:e,selection:t,lastOp:this._lastOp}),this._lastOp=\"backspace\",this._lastSelection={...this.selection},!0}paste(t){var e={value:this.value.slice(),selection:{...this.selection},_lastOp:this._lastOp,_history:this._history.slice(),_historyIndex:this._historyIndex,_lastSelection:{...this._lastSelection}};if(this.selection.start<this.pattern.firstEditableIndex){for(var s=0,i=this.pattern.firstEditableIndex-this.selection.start;s<i;s++)if(t.charAt(s)!==this.pattern.pattern[s])return!1;t=t.substring(this.pattern.firstEditableIndex-this.selection.start),this.selection.start=this.pattern.firstEditableIndex}for(s=0,i=t.length;s<i&&this.selection.start<=this.pattern.lastEditableIndex;s++){if(!this.input(t.charAt(s))){if(this.selection.start>0){var a=this.selection.start-1;if(!this.pattern.isEditableIndex(a)&&t.charAt(s)===this.pattern.pattern[a])continue}return Object.keys(e).forEach(t=>{this[t]=e[t]}),!1}}return!0}undo(){if(0===this._history.length||0===this._historyIndex)return!1;var t;if(null==this._historyIndex){this._historyIndex=this._history.length-1,t=this._history[this._historyIndex];var e=this.getValue();t.value===e&&t.selection.start===this.selection.start&&t.selection.end===this.selection.end||this._history.push({value:e,selection:{...this.selection},lastOp:this._lastOp,startUndo:!0})}else t=this._history[--this._historyIndex];return this.value=t.value.split(\"\"),this.selection=t.selection,this._lastOp=t.lastOp,!0}redo(){if(0===this._history.length||null==this._historyIndex)return!1;var t=this._history[++this._historyIndex];return this._historyIndex===this._history.length-1&&(this._historyIndex=null,t.startUndo&&this._history.pop()),this.value=t.value.split(\"\"),this.selection=t.selection,this._lastOp=t.lastOp,!0}setSelection(t){if(this.selection={...t},this.selection.start===this.selection.end){if(this.selection.start<this.pattern.firstEditableIndex)return this.selection.start=this.selection.end=this.pattern.firstEditableIndex,!0;for(var e=this.selection.start;e>=this.pattern.firstEditableIndex;){if(this.pattern.isEditableIndex(e-1)&&this.value[e-1]!==this.placeholderChar||e===this.pattern.firstEditableIndex){this.selection.start=this.selection.end=e;break}e--}return!0}return!1}}function g(t){return function(t,e){if(e){let a=Object.keys(e);for(var s=0,i=a.length;s<i;s++)t[a[s]]=e[a[s]]}return t}({},t)}v.Pattern=m;var y=v;class I extends i.Component{constructor(t){super(t),this._onChange=t=>{let e=this.mask.getValue(),s=t.target.value;s!==e&&(this._updateMaskSelection(),this.mask.setValue(s),this.setInputValue(this._getDisplayValue()),this._updateInputSelection()),this.props.onChange&&this.props.onChange(t)},this._onKeyDown=t=>{if(setTimeout(()=>{this.input.classList[this.input.value?\"add\":\"remove\"](\"has-value\")},100),function(t){return(t.ctrlKey||t.metaKey)&&t.keyCode===(t.shiftKey?l:h)}(t))return t.preventDefault(),void(this.mask.undo()&&(this.setInputValue(this._getDisplayValue()),this._updateInputSelection(),this.props.onChange&&this.props.onChange(t)));if(function(t){return(t.ctrlKey||t.metaKey)&&t.keyCode===(t.shiftKey?h:l)}(t))return t.preventDefault(),void(this.mask.redo()&&(this.setInputValue(this._getDisplayValue()),this._updateInputSelection(),this.props.onChange&&this.props.onChange(t)));if(\"Backspace\"===t.key&&(t.preventDefault(),this._updateMaskSelection(),this.mask.backspace())){let e=this._getDisplayValue();this.setInputValue(e),e&&this._updateInputSelection(),this.props.onChange&&this.props.onChange(t)}},this._onKeyPress=t=>{t.metaKey||t.altKey||t.ctrlKey||\"Enter\"===t.key||(t.preventDefault(),this._updateMaskSelection(),this.mask.input(t.key||t.data)&&(this.setInputValue(this.mask.getValue()),this._updateInputSelection(),this.props.onChange&&this.props.onChange(t)))},this._onPaste=t=>{t.preventDefault(),this._updateMaskSelection(),this.mask.paste(t.clipboardData.getData(\"Text\"))&&(this.setInputValue(this.mask.getValue()),setTimeout(()=>this._updateInputSelection(),0),this.props.onChange&&this.props.onChange(t))},this.getInputProps=()=>{let t=this.mask.pattern.length,e=this._getEventHandlers(),{placeholder:s=this.mask.emptyValue}=this.props,{placeholderChar:i,formatCharacters:a,...n}=this.props;const r={...n,...e,maxLength:t,placeholder:s};return delete r.value,r},this._lastValue=null,this.setInputValue=t=>{this._Input&&t!==this._lastValue&&(this._lastValue=t,this._Input.setState({value:t}),this._Input.input.value=t)},this._Input=null,this.handleInputRef=t=>{t&&(this._Input=t,this.input=t.input,null===this._lastValue&&\"string\"==typeof this.props.defaultValue&&(this.mask.setValue(this.props.defaultValue),this.setInputValue(this._getDisplayValue())))};let e={pattern:this.props.mask,value:this.props.value,formatCharacters:this.props.formatCharacters};this.props.placeholderChar&&(e.placeholderChar=this.props.placeholderChar),this.mask=new y(e)}componentDidMount(){this.setInputValue(this._getDisplayValue())}componentWillReceiveProps(t){this.props.mask!==t.mask&&this.props.value!==t.mask?this.mask.getValue()===this.mask.emptyValue?this.mask.setPattern(t.mask,{value:t.value}):this.mask.setPattern(t.mask,{value:this.mask.getRawValue()}):this.props.mask!==t.mask&&this.mask.setPattern(t.mask,{value:this.mask.getRawValue()}),this.props.value!==t.value&&(this.mask.setValue(t.value),this.setInputValue(this._getDisplayValue()))}componentWillUpdate(t){if(!this.props.mask)return null;t.mask!==this.props.mask&&this._updatePattern(t)}componentDidUpdate(t){if(!this.props.mask)return null;t.mask!==this.props.mask&&this.mask.selection.start&&this._updateInputSelection()}_updatePattern(t){this.mask.setPattern(t.mask,{value:this.mask.getRawValue(),selection:o(this.input)})}_updateMaskSelection(){this.mask.selection=o(this.input)}_updateInputSelection(){!function t(e,s){clearTimeout(r);try{if(e.selectionStart===s.start&&e.selectionEnd===s.end)return;if(void 0!==e.selectionStart)e.focus(),e.setSelectionRange(s.start,s.end),r=setTimeout(()=>{t(e,s)},0);else{e.focus();let t=e.createTextRange();t.collapse(!0),t.moveStart(\"character\",s.start),t.moveEnd(\"character\",s.end-s.start),t.select()}}catch(t){}}(this.input,this.mask.selection)}_getDisplayValue(){let t=this.mask.getValue();return t===this.mask.emptyValue?\"\":t}_keyPressPropName(){return\"undefined\"!=typeof navigator&&navigator.userAgent.match(/Android/i)?\"onBeforeInput\":\"onKeyPress\"}_getEventHandlers(){return{onChange:this._onChange,onKeyDown:this._onKeyDown,onPaste:this._onPaste,[this._keyPressPropName()]:this._onKeyPress}}focus(){this.input.focus()}blur(){this.input.blur()}render(){return a.a.createElement(n.a,Object.assign({},this.getInputProps(),{ref:this.handleInputRef}))}}e.a=I}}]);","extractedComments":[]}